#! /bin/sh
#  by: Andrew Velez
#
#  desc: bring down *all* wg conf

_up() (
  for conf in /etc/wireguard/*.conf; do
    [ -r "$conf" ] || continue
    wg-quick up "$conf" > /dev/null 2>&1 && break
  done
)

_down() (
  for conf in /etc/wireguard/*.conf; do
    [ -r "$conf" ] && wg-quick down "$conf" > /dev/null 2>&1
  done
)

case "$1" in
  "up")
    _up
    ;;
  "down")
    _down
    ;;
  *)
    echo "usage: mullvad-wg (up|down)"
    exit 1
    ;;
esac
